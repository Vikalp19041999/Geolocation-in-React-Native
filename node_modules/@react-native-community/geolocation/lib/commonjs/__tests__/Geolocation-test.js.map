{"version":3,"sources":["Geolocation-test.js"],"names":["jest","mock","logError","fn","warning","describe","afterEach","Geolocation","stopObserving","it","setRNConfiguration","skipPermissionRequests","expect","NativeModules","RNCGeolocation","setConfiguration","calls","length","toEqual","requestAuthorization","callback","getCurrentPosition","toBe","watchID","watchPosition","addListener","clearWatch","mockWarningCallback","mockImplementation","toBeGreaterThanOrEqual"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n */\n\nimport {NativeModules} from 'react-native';\nimport Geolocation from '../';\n\njest.mock('../utils', () => {\n  return {\n    logError: jest.fn(),\n    warning: jest.fn(),\n  };\n});\nimport {warning} from '../utils';\n\ndescribe('react-native-geolocation', () => {\n  afterEach(() => {\n    Geolocation.stopObserving();\n  });\n\n  it('should set the location observer configuration', () => {\n    Geolocation.setRNConfiguration({skipPermissionRequests: true});\n    expect(\n      NativeModules.RNCGeolocation.setConfiguration.mock.calls.length,\n    ).toEqual(1);\n  });\n\n  it('should request authorization for location requests', () => {\n    Geolocation.requestAuthorization();\n    expect(\n      NativeModules.RNCGeolocation.requestAuthorization.mock.calls.length,\n    ).toEqual(1);\n  });\n\n  it('should get the current position and pass it to the given callback', () => {\n    const callback = () => {};\n    Geolocation.getCurrentPosition(callback);\n    expect(\n      NativeModules.RNCGeolocation.getCurrentPosition.mock.calls.length,\n    ).toEqual(1);\n    expect(\n      NativeModules.RNCGeolocation.getCurrentPosition.mock.calls[0][1],\n    ).toBe(callback);\n  });\n\n  it('should add a success listener to the geolocation', () => {\n    const watchID = Geolocation.watchPosition(() => {});\n    expect(watchID).toEqual(0);\n    expect(NativeModules.RNCGeolocation.addListener.mock.calls[0][0]).toBe(\n      'geolocationDidChange',\n    );\n  });\n\n  it('should add an error listener to the geolocation', () => {\n    const watchID = Geolocation.watchPosition(() => {}, () => {});\n    expect(watchID).toEqual(0);\n    expect(NativeModules.RNCGeolocation.addListener.mock.calls[1][0]).toBe(\n      'geolocationError',\n    );\n  });\n\n  it('should clear the listeners associated with a watchID', () => {\n    const watchID = Geolocation.watchPosition(() => {}, () => {});\n    Geolocation.clearWatch(watchID);\n    expect(NativeModules.RNCGeolocation.stopObserving.mock.calls.length).toBe(\n      1,\n    );\n  });\n\n  it('should correctly assess if all listeners have been cleared', () => {\n    const watchID = Geolocation.watchPosition(() => {}, () => {});\n    Geolocation.watchPosition(() => {}, () => {});\n    Geolocation.clearWatch(watchID);\n    expect(NativeModules.RNCGeolocation.stopObserving.mock.calls.length).toBe(\n      0,\n    );\n  });\n\n  it('should not fail if the watchID one wants to clear does not exist', () => {\n    Geolocation.watchPosition(() => {}, () => {});\n    Geolocation.clearWatch(42);\n    expect(NativeModules.RNCGeolocation.stopObserving.mock.calls.length).toBe(\n      0,\n    );\n  });\n\n  it('should stop observing and warn about removing existing subscriptions', () => {\n    const mockWarningCallback = jest.fn();\n    warning.mockImplementation(mockWarningCallback);\n\n    Geolocation.watchPosition(() => {}, () => {});\n    Geolocation.stopObserving();\n    expect(NativeModules.RNCGeolocation.stopObserving.mock.calls.length).toBe(\n      1,\n    );\n    expect(mockWarningCallback.mock.calls.length).toBeGreaterThanOrEqual(1);\n  });\n});\n"]}